!function(t,n){if("function"==typeof define&&define.amd)define(["exports"],n);else if("undefined"!=typeof exports)n(exports);else{var e={exports:{}};n(e.exports),t.DDEventManager=e.exports}}(this,function(t){"use strict";function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function e(t){var n=t.split(".");return{type:n[0],tag:n[1]}}t.__esModule=!0;var i=function(){function t(i){var o=this;n(this,t),this.context=i,this._stacks=[],this._history={};var s=function(t,n){o.addListener(t,n)},r=function(t,n){o.addListener(t,n,!0)},c=function(t,n){return!!o.has(t)&&(n&&n(),!0)};this.context.on=s,this.context.one=r,this.context.has=c,this.context.hasAndOn=function(t,n){var i=e(t).type;c(i,n),s(t,n)},this.context.hasAndOne=function(t){var n=e(t).type;c(n,listener)||r(t,listener)},this.context.off=function(t){o.off(t)},this.context.emit=function(t,n){o.emit(t,n)}}return t.prototype.destroy=function(){this._stacks.forEach(function(t){t.remove()}),this._history={}},t.prototype.find=function(t){return this._stacks.filter(function(n){return n.match(t)})},t.prototype.has=function(t){return this._history[t]!==undefined},t.prototype.off=function(t){this.find(t).forEach(function(t){t.remove()})},t.prototype.emit=function(t,n){var i=e(t).type;this.find(t).forEach(function(t){t.trigger(n)}),this._history[i]=!0},t.prototype.addListener=function(t,n,e){var i=new o(this,t,n,e);this._stacks.push(i)},t}();t["default"]=i;var o=function(){function t(i,o,s){var r=arguments.length>3&&arguments[3]!==undefined&&arguments[3];n(this,t),o=e(o),this.context=i,this.type=o.type,this.tag=o.tag,this.listener=s,this.once=r}return t.prototype.remove=function(){this.context._stacks.splice(this.context._stacks.indexOf(this),1)},t.prototype.match=function(t){var n=(t=e(t)).type,i=t.tag;return(!n||""===n||this.type===n)&&(!i||this.tag===i)},t.prototype.trigger=function(t){this.listener(t),this.once&&this.remove()},t}()});